<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>案件登録 - chktn</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/project-register.css">
</head>
<body>
    <div class="container">
        <!-- ヘッダー -->
        <app-header></app-header>

        <!-- メインレイアウト -->
        <div class="main-layout">
            <!-- サイドメニュー -->
            <aside class="sidebar">
                <nav>
                    <!-- 画面固有のコンテンツ（アクションボタン） -->
                    <div class="sidebar-actions">
                        <button class="btn btn-success sidebar-save-btn">登録</button>
                    </div>
                    
                    <!-- 共通コンポーネント: 最近使った画面 -->
                    <app-recent-screens></app-recent-screens>
                </nav>
            </aside>

            <!-- コンテンツエリア -->
            <main class="content-area">
                <div class="project-register-form">
                    <h1 class="form-title">案件登録 -自社の新規案件を登録</h1>

                    <!-- 基本情報セクション -->
                    <div class="form-section">
                        <h2 class="section-title">基本情報</h2>
                        <div class="form-grid">
                            <div class="form-group form-group-full">
                                <label for="project-recruit-status" class="form-label">募集可否 <span class="form-required">*</span></label>
                                <select id="project-recruit-status" name="project-recruit-status" class="form-select">
                                    <option value="available">募集可</option>
                                    <option value="working">募集不可</option>
                                </select>
                            </div>
                            <div class="form-group form-group-full">
                                <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 8px;">
                                    <label for="project-description" class="form-label" style="margin-bottom: 0;">案件メモ</label>
                                    <button type="button" class="btn btn-info btn-sm" id="extract-project-memo-btn"><i class="icon-ai"></i>案件メモから情報抽出</button>
                                    <button type="button" class="btn btn-success btn-sm" id="generate-project-memo-btn"><i class="icon-ai"></i>案件メモを生成</button>
                                </div>
                                <textarea id="project-description" name="project-description" class="form-textarea" rows="10" placeholder="◆ 案件名： 監査業務サービスの機能追加プロジェクト(SE枠)

◆ スキル：
【必須】
・C#での基本設計開発経験
・エンジニア経験5年以上

【尚可】
・DBチューニング経験
・SQL作成経験

◆ 開始時期：2026年1月
◆ 募集人数：1名

◆ 年齢　：40歳まで
◆ 外国籍：不可

◆ 場所：幕張
◆ リモート頻度：週1か週2程度

◆ 契約：業務委託（準委任）契約
◆ 金額：～65万円
◆ 精算時間：140h～180h
◆ 支払：30日（月末締め翌月末支払い）

◆ 内容：
監査法人向けの業務システムの改修案件に参画いただきます。
フェーズとしてはテストフェーズからの参画になりますが、その後は機能追加に伴う設計~開発まで担当頂く予定です。"></textarea>
                            </div>
                            <div class="form-group form-group-full">
                                <label for="project-name" class="form-label">案件名 <span class="form-required">*</span></label>
                                <input type="text" id="project-name" name="project-name" class="form-input" placeholder="案件名を入力してください">
                            </div>
                            <div class="form-group">
                                <label for="end-company" class="form-label">案件エンド会社 <span class="form-required">*</span></label>
                                <div class="form-select-wrapper">
                                    <button type="button" class="form-select-btn" id="end-company-btn">
                                        <span class="form-select-text">選択してください</span>
                                        <span class="form-select-arrow">▼</span>
                                    </button>
                                    <div class="form-selected-value" id="end-company-selected" style="display: none;">
                                        <span class="selected-value-text"></span>
                                        <button type="button" class="selected-value-remove">×</button>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="project-manager" class="form-label">案件担当者</label>
                                <div class="form-select-wrapper">
                                    <button type="button" class="form-select-btn" id="project-manager-btn">
                                        <span class="form-select-text">選択してください</span>
                                        <span class="form-select-arrow">▼</span>
                                    </button>
                                    <div class="form-selected-values" id="project-manager-selected" style="display: none;">
                                        <div class="selected-values-list" id="project-manager-selected-list"></div>
                                        <button type="button" class="selected-value-remove-all" id="project-manager-remove-all">すべて解除</button>
                                    </div>
                                </div>
                                <p class="form-help-text">案件を担当する社員を選択します(複数選択可)。</p>
                            </div>
                        </div>
                    </div>

                    <!-- スキル情報セクション -->
                    <div class="form-section">
                        <h2 class="section-title">案件スキル</h2>
                        <div class="form-group form-group-full">
                            <div class="skill-selector">
                                <div class="skill-select-header">
                                    <select id="skill-master" class="form-select">
                                        <option value="">スキルを選択してください</option>
                                        <option value="1">Java</option>
                                        <option value="2">Spring Boot</option>
                                        <option value="3">React</option>
                                        <option value="4">PostgreSQL</option>
                                        <option value="5">AWS</option>
                                    </select>
                                    <input type="text" id="skill-custom" class="form-input skill-custom-input" placeholder="マスタにない場合は新規追加">
                                    <button type="button" class="btn btn-secondary skill-add-btn">追加</button>
                                </div>
                                <div class="skill-list" id="skill-list">
                                    <!-- 選択されたスキルがここに表示される -->
                                </div>
                            </div>
                        </div>
                        <div class="form-group form-group-full">
                            <label for="skill-memo" class="form-label">スキルメモ</label>
                            <textarea id="skill-memo" name="skill-memo" class="form-textarea"></textarea>
                        </div>
                    </div>

                    <!-- 詳細情報セクション -->
                    <div class="form-section">
                        <h2 class="section-title">詳細情報</h2>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="start-date" class="form-label">開始日</label>
                                <input type="date" id="start-date" name="start-date" class="form-input">
                            </div>
                            <div class="form-group">
                                <label for="member-number" class="form-label">募集人数</label>
                                <input type="number" id="member-number" name="member-number" class="form-input" min="1">
                            </div>
                            
                            <div class="form-group">
                                <label for="age-range" class="form-label">希望年齢幅</label>
                                <input type="text" id="age-range" name="age-range" class="form-input" placeholder="例: 25-35">
                            </div>
                            <div class="form-group">
                                <label for="foreigner" class="form-label">外国籍</label>
                                <select id="foreigner" name="foreigner" class="form-input">
                                    <option value="">選択してください</option>
                                    <option value="1">可</option>
                                    <option value="2">不可</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="work-location" class="form-label">勤務地</label>
                                <input type="text" id="work-location" name="work-location" class="form-input" placeholder="例: 東京都千代田区">
                            </div>
                            <div class="form-group">
                                <label for="desired-price" class="form-label">希望リモート頻度</label>
                                <select class="form-input" name="" id="">
                                    <option value="">選択してください</option>
                                    <option value="">フル出社</option>
                                    <option value="">週1-2日</option>
                                    <option value="">週2-3日</option>
                                    <option value="">週3-4日</option>
                                    <option value="">週4-5日</option>
                                    <option value="">フルリモート可</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="contract-type" class="form-label">契約形態</label>
                                <select id="contract-type" name="contract-type" class="form-select">
                                    <option value="">選択してください</option>
                                    <option value="contract">業務委託(準委任)</option>
                                    <option value="contract">業務委託(請負)</option>
                                    <option value="contract">契約社員</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="price" class="form-label">希望単価</label>
                                <div class="form-grid">
                                    <input type="number" id="desired-price" name="desired-price" class="form-input" placeholder="万円" min="0">
                                    <input type="number" id="desired-price" name="desired-price" class="form-input" placeholder="万円" min="0">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="price" class="form-label">精算時間</label>
                                <div class="form-grid">
                                    <input type="number" id="payment-time" name="payment-time" class="form-input" placeholder="140" min="0">
                                    <input type="number" id="payment-time" name="payment-time" class="form-input" placeholder="180" min="0">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="payment-site" class="form-label">支払いサイト</label>
                                <input type="text" id="payment-site" name="payment-site" class="form-input" placeholder="30日（月末締め翌月末支払い）">
                            </div>
                            
                        </div>
                    </div>

                    <!-- 公開設定セクション -->
                    <div class="form-section">
                        <h2 class="section-title">公開設定</h2>
                        <div class="form-grid">
                            <div class="form-group form-group-full">
                                <div class="form-row">
                                    <div class="form-col">
                                        <label class="form-label">公開設定</label>
                                        <div class="form-checkbox-group">
                                            <label class="form-checkbox-label">
                                                <input type="checkbox" id="is-public" name="is-public" class="form-checkbox">
                                                <span>公開する</span>
                                            </label>
                                        </div>
                                        <p class="form-help-text">公開にチェックを入れると、他の会社からもこの案件を検索できるようになります。</p>
                                    </div>
                                    <div class="form-col">
                                        <label for="blacklist" class="form-label">ブラックリスト</label>
                                        <div class="form-select-wrapper">
                                            <button type="button" class="form-select-btn" id="blacklist-btn">
                                                <span class="form-select-text">選択してください</span>
                                                <span class="form-select-arrow">▼</span>
                                            </button>
                                            <div class="form-selected-values" id="blacklist-selected" style="display: none;">
                                                <div class="selected-values-list" id="blacklist-selected-list"></div>
                                                <button type="button" class="selected-value-remove-all" id="blacklist-remove-all">すべて解除</button>
                                            </div>
                                        </div>
                                        <p class="form-help-text">この案件を検索対象から除外する会社を選択します。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- 取引先会社選択モーダル -->
    <div class="modal" id="end-company-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">取引先会社を選択</h3>
                <button type="button" class="modal-close" data-modal="end-company-modal">×</button>
            </div>
            <div class="modal-body">
                <div class="modal-search">
                    <input type="text" class="form-input modal-search-input" placeholder="会社名で検索">
                    <button type="button" class="btn btn-info modal-search-btn">検索</button>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary modal-new-btn">新規取引先登録</button>
                </div>
                <div class="modal-list">
                    <ul class="company-list">
                        <li class="company-list-item">
                            <button type="button" class="company-list-btn" data-company-id="1" data-company-name="サンプル株式会社">
                                <span class="company-name">サンプル株式会社</span>
                                <span class="company-code">法人番号: 1234567890123</span>
                            </button>
                        </li>
                        <li class="company-list-item">
                            <button type="button" class="company-list-btn" data-company-id="2" data-company-name="テック株式会社">
                                <span class="company-name">テック株式会社</span>
                                <span class="company-code">法人番号: 2345678901234</span>
                            </button>
                        </li>
                        <li class="company-list-item">
                            <button type="button" class="company-list-btn" data-company-id="3" data-company-name="デザイン株式会社">
                                <span class="company-name">デザイン株式会社</span>
                                <span class="company-code">法人番号: 3456789012345</span>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 案件担当者選択モーダル -->
    <div class="modal" id="project-manager-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">案件担当者を選択</h3>
                <button type="button" class="modal-close" data-modal="project-manager-modal">×</button>
            </div>
            <div class="modal-body">
                <div class="modal-search">
                    <input type="text" class="form-input modal-search-input" placeholder="担当者名で検索">
                    <button type="button" class="btn btn-info modal-search-btn">検索</button>
                </div>
                <div class="modal-list">
                    <ul class="employee-list">
                        <li class="employee-list-item">
                            <label class="employee-list-checkbox-label">
                                <input type="checkbox" class="employee-checkbox" data-employee-id="1" data-employee-name="田中太郎">
                                <div class="employee-info">
                                    <span class="employee-name">田中太郎</span>
                                    <span class="employee-department">営業部</span>
                                </div>
                            </label>
                        </li>
                        <li class="employee-list-item">
                            <label class="employee-list-checkbox-label">
                                <input type="checkbox" class="employee-checkbox" data-employee-id="2" data-employee-name="佐藤花子">
                                <div class="employee-info">
                                    <span class="employee-name">佐藤花子</span>
                                    <span class="employee-department">営業部</span>
                                </div>
                            </label>
                        </li>
                        <li class="employee-list-item">
                            <label class="employee-list-checkbox-label">
                                <input type="checkbox" class="employee-checkbox" data-employee-id="3" data-employee-name="鈴木一郎">
                                <div class="employee-info">
                                    <span class="employee-name">鈴木一郎</span>
                                    <span class="employee-department">営業部</span>
                                </div>
                            </label>
                        </li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" id="project-manager-confirm-btn">選択完了</button>
                </div>
            </div>
        </div>
    </div>



    <!-- ブラックリスト選択モーダルコンポーネント -->
    <app-blacklist-selector></app-blacklist-selector>

    <!-- メーリングリスト選択モーダルコンポーネント -->
    <app-mailing-list-selector></app-mailing-list-selector>

    <!-- Web Components -->
    <script type="module" src="components/app-header.js"></script>
    <script type="module" src="components/app-recent-screens.js"></script>
    <script type="module" src="components/app-blacklist-selector.js"></script>
    <script type="module" src="components/app-mailing-list-selector.js"></script>
    
    <script src="js/common.js"></script>
    <script src="js/project-register.js"></script>
</body>
</html>

