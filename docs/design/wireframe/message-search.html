<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>メッセージ検索 - wt2m</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/message-search.css">
</head>
<body>
    <div class="container">
        <!-- ヘッダー -->
        <app-header></app-header>

        <!-- メインレイアウト -->
        <div class="main-layout">
            <!-- サイドメニュー -->
            <aside class="sidebar">
                <nav>
                    <!-- 検索フォーム -->
                    <div class="sidebar-search-form">
                        <div class="sidebar-title">
                        <span>検索条件</span>
                        <input type="checkbox" id="save-search-conditions" checked title="検索条件を記憶します">
                    </div>
                        <form id="search-form" class="search-form">
                            <div class="search-form-actions">
                                <button type="submit" class="btn btn-info search-form-submit">検索</button>
                                <button type="button" class="btn btn-warning search-form-reset">リセット</button>
                            </div>
                            
                            <!-- 未読・既読フィルター -->
                            <div class="search-form-section">
                                <div class="search-form-section-title">状態</div>
                                <div class="search-form-group">
                                    <select id="search-read-status" name="read-status" class="search-form-select">
                                        <option value="all">全て</option>
                                        <option value="unread">未読</option>
                                        <option value="read">既読</option>
                                    </select>
                                </div>
                            </div>

                            <!-- 案件検索条件 -->
                            <div class="search-form-section">
                                <div class="search-form-section-title">案件</div>
                                <div class="search-form-group">
                                    <label for="search-project-name" class="search-form-label">案件名</label>
                                    <input type="text" id="search-project-name" name="project-name" class="search-form-input" placeholder="案件名で検索">
                                </div>
                                
                                <div class="search-form-group">
                                    <label for="search-project-skill" class="search-form-label">案件スキル</label>
                                    <input type="text" id="search-project-skill" name="project-skill" class="search-form-input" placeholder="スキルで検索">
                                </div>
                                
                            </div>
                            
                            <!-- エンジニア検索条件 -->
                            <div class="search-form-section">
                                <div class="search-form-section-title">エンジニア</div>
                                <div class="search-form-group">
                                    <label for="search-engineer-name" class="search-form-label">エンジニア名</label>
                                    <input type="text" id="search-engineer-name" name="engineer-name" class="search-form-input" placeholder="エンジニア名で検索">
                                </div>
                                
                                <div class="search-form-group">
                                    <label for="search-engineer-skill" class="search-form-label">エンジニアスキル</label>
                                    <input type="text" id="search-engineer-skill" name="engineer-skill" class="search-form-input" placeholder="スキルで検索">
                                </div>
                                
                            </div>
                        </form>
                    </div>
                    
                    <!-- 共通コンポーネント: 最近使った画面 -->
                    <app-recent-screens></app-recent-screens>
                </nav>
            </aside>

            <!-- コンテンツエリア -->
            <main class="content-area">
                <div class="message-search-results">
                    <div class="search-results-header">
                        <h1 class="search-results-title">メッセージ検索 - 日々の確認が必要なメッセージを表示する</h1>
                    </div>
                    
                    <div class="search-results-info">
                        <div class="search-results-count">
                            <span id="results-count">◯件</span>のメッセージが見つかりました
                        </div>
                    </div>

                    <!-- 検索結果テーブル -->
                    <div class="table-wrapper">
                        <table class="common-table" id="message-table">
                            <thead>
                                <tr>
                                    <th class="table-sortable" data-sort="message-type">
                                        メッセージタイプ
                                        <span class="sort-icon">▼</span>
                                    </th>

                                    <th class="table-sortable" data-sort="sender">
                                        送信者
                                        <span class="sort-icon">▼</span>
                                    </th>
                                    <th class="table-sortable" data-sort="sent-date">
                                        送信日時
                                        <span class="sort-icon">▼</span>
                                    </th>
                                    <th class="table-sortable" data-sort="project-name">
                                        案件名
                                        <span class="sort-icon">▼</span>
                                    </th>
                                    <th class="table-sortable" data-sort="engineer-name">
                                        エンジニア名
                                        <span class="sort-icon">▼</span>
                                    </th>
                                    <th>アクション</th>
                                </tr>
                            </thead>
                            <tbody id="message-table-body">
                                <tr data-message-id="1" class="unread">
                                    <td>
                                        <span class="badge badge-message-type-1">面談依頼</span>
                                    </td>

                                    <td>山田太郎（サンプル株式会社）</td>
                                    <td>2024/12/15 14:30</td>
                                    <td>
                                        <a href="project-edit.html" class="table-link"><span class="badge-own-item">自</span>フルスタックエンジニア募集</a>
                                    </td>
                                    <td>佐藤一郎</td>
                                    <td>
                                        <div class="table-actions">
                                            <button type="button" class="btn btn-warning btn-sm read-status-btn" data-message-id="1" data-is-read="false">未読</button>
                                            <button type="button" class="btn btn-primary btn-sm meeting-edit-btn" data-meeting-id="1">面談編集</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr data-message-id="2" class="read">
                                    <td>
                                        <span class="badge badge-message-type-2">面談依頼</span>
                                    </td>

                                    <td>鈴木花子（テック株式会社）</td>
                                    <td>2024/12/14 10:15</td>
                                    <td>
                                        <a href="public-project-detail.html" class="table-link">バックエンドエンジニア募集</a>
                                    </td>
                                    <td>田中次郎</td>
                                    <td>
                                        <div class="table-actions">
                                            <button type="button" class="btn btn-outline-secondary btn-sm read-status-btn" data-message-id="2" data-is-read="true">既読</button>
                                            <button type="button" class="btn btn-primary btn-sm meeting-edit-btn" data-meeting-id="2">面談編集</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr data-message-id="3" class="unread">
                                    <td>
                                        <span class="badge badge-message-type-3">ステータス変化</span>
                                    </td>

                                    <td>システム</td>
                                    <td>2024/12/13 16:45</td>
                                    <td>
                                        <a href="project-edit.html" class="table-link"><span class="badge-own-item">自</span>フロントエンドエンジニア募集</a>
                                    </td>
                                    <td>伊藤三郎</td>
                                    <td>
                                        <div class="table-actions">
                                            <button type="button" class="btn btn-warning btn-sm read-status-btn" data-message-id="3" data-is-read="false">未読</button>
                                            <button type="button" class="btn btn-primary btn-sm meeting-edit-btn" data-meeting-id="3">面談編集</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr data-message-id="4" class="read">
                                    <td>
                                        <span class="badge badge-message-type-4">社内メッセージ通知</span>
                                    </td>

                                    <td>システム</td>
                                    <td>2024/12/13 16:45</td>
                                    <td>
                                        <a href="project-edit.html" class="table-link"><span class="badge-own-item">自</span>フロントエンドエンジニア募集</a>
                                    </td>
                                    <td>伊藤三郎</td>
                                    <td>
                                        <div class="table-actions">
                                            <button type="button" class="btn btn-outline-secondary btn-sm read-status-btn" data-message-id="4" data-is-read="true">既読</button>
                                            <button type="button" class="btn btn-primary btn-sm meeting-edit-btn" data-meeting-id="3">面談編集</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr data-message-id="5" class="unread">
                                    <td>
                                        <span class="badge badge-message-type-100">質問・問い合わせ</span>
                                    </td>

                                    <td>高橋四郎（デザイン株式会社）</td>
                                    <td>2024/12/12 09:20</td>
                                    <td>
                                        <a href="public-project-detail.html" class="table-link">UI/UXデザイナー募集</a>
                                    </td>
                                    <td>—</td>
                                    <td>
                                        <div class="table-actions">
                                            <button type="button" class="btn btn-warning btn-sm read-status-btn" data-message-id="5" data-is-read="false">未読</button>
                                            <button type="button" class="btn btn-info btn-sm message-detail-btn" data-message-id="5">詳細</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- ページネーション -->
                    <div class="pagination">
                        <button type="button" class="pagination-btn pagination-btn-prev" disabled>前へ</button>
                        <div class="pagination-pages">
                            <button type="button" class="pagination-page active">1</button>
                            <button type="button" class="pagination-page">2</button>
                            <button type="button" class="pagination-page">3</button>
                        </div>
                        <button type="button" class="pagination-btn pagination-btn-next">次へ</button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- 面談編集モーダルコンポーネント -->
    <app-engineer-meeting-edit></app-engineer-meeting-edit>

    <!-- メールプレビューコンポーネント -->
    <app-email-preview></app-email-preview>

    <!-- Web Components -->
    <script type="module" src="components/app-header.js"></script>
    <script type="module" src="components/app-recent-screens.js"></script>
    <script type="module" src="components/app-engineer-meeting-edit.js"></script>
    <script type="module" src="components/app-email-preview.js"></script>
    
    <script src="js/common.js"></script>
    <script src="js/message-search.js"></script>
</body>
</html>

