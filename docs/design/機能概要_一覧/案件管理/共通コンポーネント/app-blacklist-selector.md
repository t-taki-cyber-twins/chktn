# ブラックリスト選択 (app-blacklist-selector.js)

## 概要
特定の企業をブラックリスト（取引禁止・非公開対象）として設定するためのモーダルコンポーネントです。
個別の会社を選択するだけでなく、会社名に含まれる文字列（LIKEパターン）を指定して、条件に一致する会社を一括で除外対象に設定することも可能です。

## 機能の目的
- 競合他社や取引停止中の企業への情報公開を防ぐ。
- 個別の会社指定だけでなく、グループ会社などを名前のパターンでまとめて指定することで、設定の手間を削減し、将来的な登録漏れも防ぐ。

## ユースケース
- **個別企業のブラックリスト登録**: ユーザーは、特定の競合他社を検索し、ブラックリストに追加する。
- **パターンによるブラックリスト登録**: ユーザーは、「〇〇グループ」や「〇〇システム」といった文字列を指定し、その名称を含む企業をまとめてブラックリストに追加する。
- **ブラックリスト設定の確認・解除**: ユーザーは、設定済みのブラックリスト（企業およびパターン）を確認し、必要に応じて解除する。

## EARS 記法による要件定義

### 会社選択
- **WHEN** ユーザが会社名検索キーワードを入力して検索ボタンを押した際
  - **THEN** システムはキーワードに一致する会社をリスト表示する
  
- **WHEN** ユーザが会社リストのチェックボックスを選択した際
  - **THEN** システムは選択された会社を保持する

### LIKEパターン指定
- **WHEN** ユーザが除外したい文字列を入力して「追加」ボタンを押した際
  - **IF** 入力文字列が空でない場合
    - **THEN** システムは入力された文字列をLIKEパターンとしてリストに追加する
    - **AND** 入力フィールドをクリアする
  - **ELSE**
    - **THEN** システムはエラーメッセージを表示する

- **WHEN** ユーザがLIKEパターンリストの削除ボタンを押した際
  - **THEN** システムは該当するパターンをリストから削除する

### 確定・キャンセル
- **WHEN** ユーザが「選択を確定」ボタンを押した際
  - **THEN** システムは選択された会社とLIKEパターンのリストを呼び出し元に返却する
  - **AND** モーダルを閉じる

- **WHEN** ユーザが「キャンセル」ボタンまたは閉じるボタンを押した際
  - **THEN** システムは変更を破棄してモーダルを閉じる

## 機能一覧

| 画面 | 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|---|
| ブラックリスト選択 | 会社検索 | 会社名で検索し、候補を表示する | 必須 | ユーザー | |
| ブラックリスト選択 | 会社選択 | チェックボックスで個別の会社を選択する | 必須 | ユーザー | |
| ブラックリスト選択 | LIKEパターン追加 | 除外対象とする文字列パターンを追加する | 必須 | ユーザー | |
| ブラックリスト選択 | LIKEパターン削除 | 追加済みのLIKEパターンを削除する | 必須 | ユーザー | |
| ブラックリスト選択 | 確定 | 選択内容（会社＋パターン）を確定して呼び出し元に反映する | 必須 | ユーザー | |
| ブラックリスト選択 | キャンセル | 選択をキャンセルしてモーダルを閉じる | 必須 | ユーザー | |

## ユーザ確認事項
- **LIKEパターンの適用範囲**: LIKEパターンは「会社名」のみに適用される想定ですが、他の属性（住所など）にも適用する必要があるか確認が必要です。現状は会社名のみです。
- **既存データとの整合性**: 既に登録されている会社名が、後から追加されたLIKEパターンに一致した場合の挙動（自動的にブラックリスト入りするか、警告が出るかなど）について、バックエンド側の仕様と合わせて確認が必要です。
