# 案件編集 (project-edit.html)

## 概要
既存の案件情報を編集するための画面です。
案件情報の更新だけでなく、その案件に関連するエンジニア（面談中・稼働中）の一覧表示や、面談情報の編集もここから行うことができます。

## 機能の目的
- 登録済みの案件情報を最新の状態に更新する。
- 案件に関連するエンジニアの状況を把握し、面談調整などのアクションを行う。
- 案件のステータスや公開設定を適切に管理する。

## ユースケース
- **案件情報の更新**: ユーザーは、案件の内容（期間、単価、スキル要件など）に変更があった場合、情報を更新する。
- **関連エンジニアの確認**: ユーザーは、この案件に提案されているエンジニアや稼働中のエンジニアを確認する。
- **面談情報の編集**: ユーザーは、関連エンジニア一覧から面談編集モーダルを開き、日程調整やステータス変更を行う。
- **メール送信**: 面談情報の更新時に、関係者への通知メールを作成・送信する。

## EARS 記法による要件定義

### 案件情報編集
- **WHEN** ユーザが案件編集画面を開いた際
  - **THEN** システムは既存の案件情報をフォームにロードして表示する
  - **AND** 関連するエンジニアの一覧を表示する

- **WHEN** ユーザが「更新」ボタンをクリックした際
  - **THEN** システムは入力内容をバリデーションする
  - **IF** バリデーションエラーがない場合
    - **THEN** システムは案件情報を更新する
    - **AND** 完了メッセージを表示する

### 関連エンジニア管理
- **WHEN** ユーザが関連エンジニア一覧の「編集」ボタンをクリックした際
  - **THEN** システムは面談編集モーダル（`app-engineer-meeting-edit`）を開く
  - **AND** 該当する面談情報をロードする

- **WHEN** ユーザが面談情報を更新する際
  - **THEN** システムはメールプレビューモーダル（`app-email-preview`）を表示する
  - **AND** 更新内容に基づいたメール文面を自動生成する

## 機能一覧

| 画面 | 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|---|
| 案件編集 | 案件情報ロード | 画面表示時に既存の案件情報を取得し、フォームにセットする | 必須 | システム | |
| 案件編集 | 案件情報更新 | フォームの入力内容で案件情報を更新する | 必須 | ユーザー | |
| 案件編集 | 関連エンジニア一覧表示 | 案件に関連するエンジニア（面談中、稼働中など）を一覧表示する | 必須 | システム | |
| 案件編集 | 面談編集モーダル表示 | 関連エンジニア一覧から面談編集モーダルを開く | 必須 | ユーザー | `app-engineer-meeting-edit`を使用 |
| 案件編集 | メールプレビュー | 面談情報更新時にメールプレビューを表示する | 必須 | システム | `app-email-preview`を使用 |
| 案件編集 | エンジニア詳細遷移 | エンジニア名リンクからエンジニア詳細/編集画面へ遷移する | 必須 | ユーザー | 自社エンジニアは編集、他社は公開詳細へ |

## ユーザ確認事項
- **関連エンジニアの表示範囲**: 「表示している自テナントの案件の面談中のものと稼働中のエンジニア」とありますが、過去に稼働していたエンジニアや、不採用になったエンジニアを表示する必要があるか確認が必要です。
- **メール送信のフロー**: 面談情報更新時に必ずメール送信フロー（プレビュー）を挟むか、送信せずに更新のみを行うオプションをわかりやすく配置する必要があるか確認が必要です（現状のモックではプレビュー内で選択可能）。

## 共通コンポーネント
この画面では以下の共通コンポーネントを使用しています。
- [app-project-form](共通コンポーネント/app-project-form.md): 案件情報入力フォーム
- [app-mailing-list-selector](共通コンポーネント/app-mailing-list-selector.md): メーリングリスト選択コンポーネント
- [app-engineer-meeting-edit](../メッセージ・面談/共通コンポーネント/app-engineer-meeting-edit.md): 面談情報編集モーダル

- [app-email-preview](../メッセージ・面談/共通コンポーネント/app-email-preview.md): 送信メールプレビュー

