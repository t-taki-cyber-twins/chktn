# 案件登録 (project-register.html)

## 概要
自社の新しい案件情報を登録するための画面です。
案件の基本情報、スキル要件、契約条件、公開設定などを詳細に入力し、データベースに保存します。

## 機能の目的
- 新規案件の情報を正確かつ効率的にシステムに登録する。
- 案件情報の入力漏れを防ぎ、品質を担保する。
- 公開設定やブラックリスト設定を行い、適切な範囲で情報を公開できるようにする。

## ユースケース
- **案件情報の入力**: ユーザーは、案件名、エンド会社、スキル要件、勤務条件などの詳細情報を入力する。
- **AIによる入力支援**: ユーザーは、案件メモやスキルメモからAIを使用して情報を抽出・生成し、入力の手間を削減する（将来実装）。
- **マスタからの選択**: ユーザーは、エンド会社、スキル、担当者などをマスタから検索・選択して入力する。
- **公開設定**: ユーザーは、案件を公開するかどうか、および特定の企業（ブラックリスト）に非公開にするかを設定する。
- **案件の保存**: ユーザーは、入力した情報を保存し、案件登録を完了する。

## EARS 記法による要件定義

### 案件情報入力
- **WHEN** ユーザが案件登録画面を開いた際
  - **THEN** システムは空の案件入力フォームを表示する
  - **AND** 必須項目（案件名、エンド会社、募集可否など）を明示する

- **WHEN** ユーザが「エンド会社」選択ボタンをクリックした際
  - **THEN** システムは取引先会社選択モーダルを表示する
  - **AND** ユーザは会社名で検索・選択できる

- **WHEN** ユーザが「スキル」を追加する際
  - **THEN** システムはスキルマスタからの選択または自由入力を受け付ける
  - **AND** 追加されたスキルをリスト表示する

### AI支援（将来実装）
- **WHEN** ユーザが「案件メモから情報抽出」ボタンをクリックした際
  - **THEN** システムは入力されたメモを解析し、関連するフィールド（スキル、単価など）に自動入力する（モック）

### 保存・キャンセル
- **WHEN** ユーザが「登録」ボタンをクリックした際
  - **IF** 入力内容に不備がある場合
    - **THEN** システムはエラーメッセージを表示し、保存を中断する
  - **ELSE**
    - **THEN** システムは案件情報を保存する
    - **AND** 完了メッセージを表示し、適切な画面（案件検索など）へ遷移する

- **WHEN** ユーザが「キャンセル」ボタン（または戻る操作）を行った際
  - **THEN** システムは確認ダイアログを表示する
  - **IF** ユーザが破棄を承認した場合
    - **THEN** システムは前の画面に戻る

## 機能一覧

| 画面 | 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|---|
| 案件登録 | 基本情報入力 | 案件名、エンド会社、募集可否、案件メモなどを入力する | 必須 | ユーザー | エンド会社はモーダル選択 |
| 案件登録 | スキル情報入力 | 必須スキル、尚可スキルを入力する | 必須 | ユーザー | マスタ選択または自由入力 |
| 案件登録 | 詳細情報入力 | 期間、単価、勤務地、契約形態などを入力する | 必須 | ユーザー | |
| 案件登録 | 連絡先情報入力 | 案件担当者、メーリングリストなどを設定する | 必須 | ユーザー | 担当者は社員選択コンポーネント使用 |
| 案件登録 | 非公開情報入力 | 社内通知用メーリングリストなどを設定する | 必須 | ユーザー | |
| 案件登録 | 公開設定 | 公開フラグ、ブラックリストを設定する | 必須 | ユーザー | ブラックリストは専用コンポーネント使用 |
| 案件登録 | AI入力支援 | メモからの情報抽出、メモ生成を行う | 推奨 | システム | 現状はモックまたは未実装 |
| 案件登録 | バリデーション | 必須項目や形式のチェックを行う | 必須 | システム | |
| 案件登録 | 保存 | 入力情報をデータベースに保存する | 必須 | ユーザー | |

## ユーザ確認事項
- **AI機能の仕様**: 「案件メモから情報抽出」「案件メモを生成」の具体的な挙動（どの項目にマッピングするか、生成のトリガーなど）について詳細な仕様策定が必要です。
- **マスタデータの連携**: エンド会社やスキルのマスタデータが不足している場合の新規登録フロー（画面遷移せずに登録できるかなど）について確認が必要です。現状のモックでは「新規取引先登録」ボタンがありますが、挙動は未実装の可能性があります。
- **連絡先メールアドレス**: 自由入力のメールアドレスとメーリングリストの使い分けや、通知の優先順位について確認が必要です。

## 共通コンポーネント
この画面では以下の共通コンポーネントを使用しています。
- [app-project-form](共通コンポーネント/app-project-form.md): 案件情報入力フォーム
- [app-blacklist-selector](共通コンポーネント/app-blacklist-selector.md): ブラックリスト選択コンポーネント
- [app-mailing-list-selector](共通コンポーネント/app-mailing-list-selector.md): メーリングリスト選択コンポーネント



