# スキルマスタ管理画面 (master-skill.html)

## 概要
システム全体で使用するスキル情報とスキルカテゴリを管理する画面です。2つのタブで構成され、エンジニアのスキル登録や案件のスキル要件設定の基礎となるマスタデータを一元管理します。

## 機能の目的
- システム全体で使用する統一されたスキル体系を定義・管理する。
- スキルを適切にカテゴリ分類し、検索性・視認性を向上させる。
- テナントやユーザーからのスキル追加リクエストを管理し、マスタデータの充実を図る。

## ユースケース
- **新規スキルの追加**: システム管理者は、新しい技術やツールが登場した際に、スキルマスタに追加する。
- **スキルカテゴリの作成**: システム管理者は、スキルを分類するための新しいカテゴリを作成する。
- **スキルのステータス管理**: システム管理者は、スキルを公開・非公開に設定し、利用可能なスキルを管理する。
- **リクエストの確認**: システム管理者は、ユーザーからリクエストされたスキルを確認し、承認または却下する。
- **カテゴリによるスキル検索**: システム管理者は、カテゴリでスキルをフィルタリングし、特定分野のスキルを一覧表示する。

## EARS 記法による要件定義

### タブ1: スキルマスタ管理

#### スキル検索・一覧表示
- **WHEN** システム管理者が「スキルマスタ管理」タブを開いた際
  - **THEN** システムはすべてのスキルを一覧表示する
  - **AND** ID、スキル名、カテゴリ、説明、ステータスを表示する

- **WHEN** システム管理者が検索条件（スキル名、カテゴリ、ステータス）を入力して検索を実行した際
  - **THEN** システムは条件に一致するスキルのみをフィルタリングして表示する
  - **IF** カテゴリが選択されている場合
    - **THEN** システムは該当カテゴリのスキルのみを表示する
  - **IF** ステータスが選択されている場合
    - **THEN** システムは該当ステータスのスキルのみを表示する

#### スキルステータスの種類
- **公開**: すべてのテナント・ユーザーが利用可能なスキル
- **非公開**: 一部のテナント・ユーザーのみが利用可能なスキル
- **リクエスト**: ユーザーから追加要望があったが、まだ正式に公開されていないスキル

#### スキルCRUD操作
- **WHEN** システム管理者が「新規作成」ボタンをクリックした際
  - **THEN** システムはスキル作成フォームを表示する
  - **AND** スキルID、スキル名、カテゴリ、説明、ステータスの入力を受け付ける

- **WHEN** システム管理者が「編集」ボタンをクリックした際
  - **THEN** システムは該当するスキルの編集フォームを表示する
  - **AND** 既存のスキル情報をフォームにロードする

- **WHEN** システム管理者が「削除」ボタンをクリックした際
  - **THEN** システムは確認ダイアログを表示する
  - **IF** 管理者が削除を確認した場合
    - **AND IF** 該当スキルがエンジニアや案件に紐づいている場合
      - **THEN** システムは警告メッセージを表示し、削除の影響を確認する
    - **ELSE**
      - **THEN** システムはスキルを削除する

### タブ2: スキルカテゴリ管理

#### カテゴリ検索・一覧表示
- **WHEN** システム管理者が「スキルカテゴリ管理」タブを開いた際
  - **THEN** システムはすべてのスキルカテゴリを一覧表示する
  - **AND** ID、カテゴリ名、説明を表示する

- **WHEN** システム管理者がカテゴリ名で検索を実行した際
  - **THEN** システムは検索条件に一致するカテゴリのみをフィルタリングして表示する

#### カテゴリCRUD操作
- **WHEN** システム管理者が「新規作成」ボタンをクリックした際
  - **THEN** システムはカテゴリ作成フォームを表示する
  - **AND** カテゴリID、カテゴリ名、説明の入力を受け付ける

- **WHEN** システム管理者が「編集」ボタンをクリックした際
  - **THEN** システムは該当するカテゴリの編集フォームを表示する
  - **AND** 既存のカテゴリ情報をフォームにロードする

- **WHEN** システム管理者が「削除」ボタンをクリックした際
  - **THEN** システムは確認ダイアログを表示する
  - **IF** 管理者が削除を確認した場合
    - **AND IF** 該当カテゴリにスキルが紐づいている場合
      - **THEN** システムはエラーメッセージを表示し、削除を拒否する
    - **ELSE**
      - **THEN** システムはカテゴリを削除する

### 共通機能

#### タブ切り替え
- **WHEN** システム管理者がタブボタンをクリックした際
  - **THEN** システムは該当するタブの内容を表示する
  - **AND** サイドバーの検索フォームも該当するタブ用のものに切り替える
  - **AND** アクティブなタブを視覚的に強調表示する

## 機能一覧

| 画面 | 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|---|
| スキルマスタ管理（タブ1） | スキル検索 | スキル名、カテゴリ、ステータスで検索する | 必須 | システム管理者 | 複数条件の組み合わせ可 |
| スキルマスタ管理（タブ1） | スキル一覧表示 | すべてのスキルをテーブル形式で表示する | 必須 | システム | ID、スキル名、カテゴリ、説明、ステータスを表示 |
| スキルマスタ管理（タブ1） | スキル新規作成 | 新しいスキルを作成する | 必須 | システム管理者 | 作成フォームの実装方法要確認 |
| スキルマスタ管理（タブ1） | スキル編集 | 既存スキルの情報を編集する | 必須 | システム管理者 | 編集フォームの実装方法要確認 |
| スキルマスタ管理（タブ1） | スキル削除 | スキルを削除する | 必須 | システム管理者 | 紐づけチェックと確認ダイアログ |
| スキルマスタ管理（タブ1） | ステータス表示 | スキルのステータス（公開/非公開/リクエスト）を表示する | 必須 | システム | バッジ形式で色分け表示 |
| スキルマスタ管理（タブ1） | ページネーション | ページ切り替えを行う | 必須 | システム管理者 | `app-pagination`コンポーネントを使用 |
| スキルカテゴリ管理（タブ2） | カテゴリ検索 | カテゴリ名で検索する | 必須 | システム管理者 | |
| スキルカテゴリ管理（タブ2） | カテゴリ一覧表示 | すべてのカテゴリをテーブル形式で表示する | 必須 | システム | ID、カテゴリ名、説明を表示 |
| スキルカテゴリ管理（タブ2） | カテゴリ新規作成 | 新しいカテゴリを作成する | 必須 | システム管理者 | 作成フォームの実装方法要確認 |
| スキルカテゴリ管理（タブ2） | カテゴリ編集 | 既存カテゴリの情報を編集する | 必須 | システム管理者 | 編集フォームの実装方法要確認 |
| スキルカテゴリ管理（タブ2） | カテゴリ削除 | カテゴリを削除する | 必須 | システム管理者 | 紐づけチェックと確認ダイアログ |
| スキルカテゴリ管理（タブ2） | ページネーション | ページ切り替えを行う | 必須 | システム管理者 | `app-pagination`コンポーネントを使用 |
| スキルマスタ管理（共通） | タブ切り替え | 2つのタブ間で切り替える | 必須 | システム管理者 | サイドバー検索フォームも連動 |

## ユーザ確認事項
- **フォームの実装方法**: スキル、カテゴリの作成・編集フォームをモーダル、別画面、インライン編集のいずれで実装するか確認が必要です。
- **リクエストスキルの扱い**: 「リクエスト」ステータスのスキルはどのユーザーから、どのような経路でリクエストされるのか、またどのように承認・却下するのかの確認が必要です。
- **非公開スキルの利用範囲**: 「非公開」スキルは具体的にどのテナント・ユーザーが利用できるのか、設定方法や管理方法の確認が必要です。
- **スキル削除時の紐づけ**: スキル削除時にエンジニアや案件に紐づいている場合の具体的な挙動（削除拒否か、警告表示のみか）の確認が必要です。
- **スキルIDの採番方法**: スキルIDは手動で入力するか、システムが自動採番するかの確認が必要です。
- **カテゴリの階層構造**: 現在は1階層のカテゴリですが、将来的にサブカテゴリ（階層構造）が必要になる可能性について確認が必要です。
- **ページネーション仕様**: 各タブで1ページあたりの表示件数や、サーバーサイドページネーションの実装方法について確認が必要です。
