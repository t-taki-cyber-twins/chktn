# 面談編集モーダル (app-engineer-meeting-edit.js)

## 概要
エンジニアと案件の面談情報を管理・編集するためのモーダルコンポーネントです。面談の日程調整、ステータス管理、面談ツールの設定、および関連するメッセージのやり取りを一元的に行います。

## 機能の目的
- 面談の進捗（日程調整中、確定、合否など）を管理する。
- 複数回にわたる面談（1次、2次など）をラウンドとして管理する。
- 面談に使用するツール（Zoom, Google Meet等）や参加者を設定し、スムーズな実施を支援する。
- 面談に関連するメッセージのやり取りをコンテキスト内で完結させる。

## ユースケース
- **面談の新規作成**: 案件とエンジニアを選択し、新しい面談プロセスを開始する。
- **面談日程の調整**: 候補日を提示したり、確定した日時を設定する。
- **面談結果の記録**: 面談実施後、合否や辞退などの結果を記録する。
- **面談ツールの設定**: オンライン面談のURLやツールを設定し、参加者に共有する。
- **稼働情報の管理**: 面談合格後、入場待ちや稼働中などのステータスを管理する。

## EARS 記法による要件定義

### 面談ラウンド管理
- **WHEN** ユーザが「面談回を追加」ボタン（UI上はラウンド管理コンポーネント内）をクリックした際
  - **THEN** システムは新しい面談ラウンド（例：2回目）を作成し、アクティブにする
- **WHEN** ユーザが過去の面談回タブをクリックした際
  - **THEN** システムは該当する面談回の情報を表示する（読み取り専用または編集可能）

### ステータス更新
- **WHEN** ユーザが面談ステータスを変更した際
  - **THEN** システムは最新ステータス表示を更新する
  - **IF** ステータスが「合格」の場合
    - **THEN** 「稼働情報」タブを有効化する

### 情報保存と通知
- **WHEN** ユーザが「更新」ボタンをクリックした際
  - **THEN** システムは現在の面談回情報、稼働情報などを保存する
  - **AND** 必要に応じてメッセージ返信モーダルを開き、ステータスに応じたテンプレート文を挿入する

## 機能一覧

| コンポーネント | 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|---|
| app-engineer-meeting-edit | 面談データ読み込み | 指定された面談IDに基づき、エンジニア・案件・面談履歴情報をロードする | 必須 | システム | |
| app-engineer-meeting-edit | 新規作成モード | 案件を選択して新規面談プロセスを開始する | 必須 | ユーザー | |
| app-engineer-meeting-edit | 案件選択 | 新規作成時、対象となる案件を選択または仮案件を作成する | 必須 | ユーザー | `app-project-selector`を使用 |
| app-engineer-meeting-edit | ラウンド管理 | 面談回数（1次、2次...）の追加・削除・切り替えを行う | 必須 | ユーザー | `app-meeting-round-manager`を使用 |
| app-engineer-meeting-edit | 面談詳細設定 | 日時、場所、所要時間、メモなどを設定する | 必須 | ユーザー | |
| app-engineer-meeting-edit | ツール・参加者設定 | 面談ツール（Zoom等）や参加者（エンジニア側・案件側）を設定する | 必須 | ユーザー | `app-meeting-tool-settings`を使用 |
| app-engineer-meeting-edit | メッセージスレッド表示 | 面談に関連するメッセージスレッドを表示する | 必須 | ユーザー | `app-message-list`を使用 |
| app-engineer-meeting-edit | メッセージ返信 | ステータス更新時にテンプレートを用いてメッセージを送信する | 必須 | ユーザー | `app-message-reply`を使用 |
| app-engineer-meeting-edit | 稼働情報管理 | 入場待ち、稼働中などのステータスや単価、期間を管理する | 必須 | ユーザー | 合格後に利用可能 |

## ユーザ確認事項
- **稼働情報タブの有効化条件**: 現在はステータス変更時にロジックで制御していますが、具体的な有効化条件（「合格」ステータスのみか、手動制御も必要か）の確認が必要です。
- **仮案件の扱い**: 「仮案件を追加」機能の具体的なデータ永続化や、正規案件への昇格フローについての要件確認が必要です。
- **メッセージテンプレート**: ステータスごとの自動生成メッセージ文言の精査が必要です。
