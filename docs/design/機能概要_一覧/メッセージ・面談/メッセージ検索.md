# メッセージ検索画面 (message-search.html)

## 概要
日々の確認が必要なメッセージ（面談依頼、ステータス変更、問い合わせ等）を検索・一覧表示し、詳細確認や面談調整などの次のアクションにつなげるための画面です。

## 機能の目的
- ユーザーが自分宛ての重要なメッセージ（面談依頼など）を効率的に発見し、対応漏れを防ぐ。
- メッセージの状態（未読・既読）を管理し、タスクの消化状況を可視化する。

## ユースケース
- **未読メッセージの確認**: ユーザーは、ログイン後に「未読」のメッセージを検索し、新規の依頼や通知を確認する。
- **特定の案件・エンジニアの状況確認**: ユーザーは、特定の案件名やエンジニア名で検索し、過去のやり取りや現在のステータスを確認する。
- **面談の調整**: ユーザーは、面談依頼メッセージから直接「面談編集」画面を開き、日程調整を行う。
- **問い合わせ対応**: ユーザーは、問い合わせメッセージから詳細画面へ遷移し、内容を確認して回答する。

## EARS 記法による要件定義

### メッセージ検索・一覧表示
- **WHEN** ユーザがメッセージ検索画面を開いた際
  - **THEN** システムはメッセージ一覧を送信日時の降順で表示する
  - **AND** 未読メッセージを強調表示する

- **WHEN** ユーザが検索条件（未読/既読、案件名、エンジニア名など）を入力して検索を実行した際
  - **THEN** システムは条件に一致するメッセージのみをフィルタリングして表示する
  - **IF** 「検索条件を記憶する」がチェックされている場合
    - **THEN** システムは検索条件を保存し、次回アクセス時に復元する

- **WHEN** ユーザが「未読/既読」ボタンをクリックした際
  - **THEN** システムはメッセージの既読ステータスを切り替える
  - **AND** ボタンの表示を更新する

### アクション実行
- **WHEN** ユーザが「面談編集」ボタンをクリックした際
  - **THEN** システムは面談編集モーダル（`app-engineer-meeting-edit`）を開く
  - **AND** 該当する面談情報をロードする

- **WHEN** ユーザが「詳細」ボタン（質問・問い合わせ等）をクリックした際
  - **THEN** システムは該当する案件の詳細画面（`public-project-detail.html`）へ遷移する
  - **AND** メッセージIDをパラメータとして渡す

- **WHEN** ユーザが案件名のリンクをクリックした際
  - **IF** 自社案件の場合
    - **THEN** システムは案件編集画面（`project-edit.html`）へ遷移する
  - **ELSE** （他社公開案件の場合）
    - **THEN** システムは公開案件詳細画面（`public-project-detail.html`）へ遷移する

## 機能一覧

| 画面 | 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|---|
| メッセージ検索 | 検索 | 条件（状態、案件名、エンジニア名など）を指定してメッセージを検索する | 必須 | ユーザー | |
| メッセージ検索 | 検索条件記憶 | 「検索条件を記憶します」がONの場合、検索条件を保存する | 推奨 | システム | localStorageで実装予定 |
| メッセージ検索 | 一覧表示 | 検索結果をテーブル形式で表示する | 必須 | システム | |
| メッセージ検索 | ソート | テーブルのヘッダーをクリックして、昇順・降順で並び替える | 必須 | ユーザー | |
| メッセージ検索 | 既読/未読切替 | メッセージの既読/未読状態を切り替える | 必須 | ユーザー | |
| メッセージ検索 | 面談編集モーダル表示 | 「面談編集」ボタン押下時にモーダルを表示する | 必須 | ユーザー | `app-engineer-meeting-edit`を使用 |
| メッセージ検索 | 詳細画面遷移 | 「詳細」ボタン押下時に案件詳細画面へ遷移する | 必須 | ユーザー | |
| メッセージ検索 | ページネーション | ページ切り替えを行う | 必須 | ユーザー | 現状はモック実装 |
| メッセージ検索 | 案件リンク遷移 | 案件名から適切な案件画面（自社/他社）へ遷移する | 必須 | システム | 自社案件には「自」バッジを表示 |

## ユーザ確認事項
- **ページネーションの仕様**: 1ページあたりの表示件数や、サーバーサイドページネーションの挙動について確認が必要です。
- **詳細ボタンの遷移先**: 問い合わせメッセージの場合、`public-project-detail.html` に遷移していますが、これで要件を満たしているか（問い合わせ内容の表示場所など）確認が必要です。
- **検索条件の記憶**: 保存するタイミング（検索時か、チェックボックス変更時か）や保存期間についての詳細な要望があれば確認が必要です。
