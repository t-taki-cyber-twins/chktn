# LP・ログイン画面 (index.html)

## 概要
サービスの入り口となるランディングページ（LP）兼ログイン画面です。
ユーザーの認証を行うほか、新規登録やパスワードリセットへの導線を提供します。また、紹介者経由のアクセスをトラッキングする機能も持ちます。

## 機能の目的
- 既存ユーザーが安全にシステムにログインできるようにする。
- 新規ユーザーを会員登録画面へ誘導する。
- パスワードを忘れたユーザーをリセット画面へ誘導する。
- アフィリエイトや紹介プログラムのために、流入元の紹介者を記録する。

## ユースケース
- **ログイン**: ユーザーは、メールアドレスとパスワードを入力してシステムにログインする。
- **新規登録**: ユーザーは、「新規会員登録はこちら」リンクから会員登録画面へ遷移する。
- **パスワードリセット**: パスワードを忘れたユーザーは、「パスワードをお忘れの方」リンクからリセット要求画面へ遷移する。
- **紹介者経由のアクセス**: ユーザーが紹介リンク（パラメータ付きURL）を踏んでアクセスした際、システムは紹介者IDを記録する。

## EARS 記法による要件定義

### ログイン
- **WHEN** ユーザーがログイン画面を開いた際
  - **THEN** システムはメールアドレスとパスワードの入力フォームを表示する

- **WHEN** ユーザーが有効なメールアドレスとパスワードを入力し、「ログイン」ボタンをクリックした際
  - **THEN** システムは認証を行い、成功すればダッシュボード（`top.html`）へ遷移する

- **WHEN** ユーザーが無効な認証情報を入力し、「ログイン」ボタンをクリックした際
  - **THEN** システムはエラーメッセージを表示し、ログインを拒否する

### 画面遷移
- **WHEN** ユーザーが「新規会員登録はこちら」リンクをクリックした際
  - **THEN** システムは会員登録画面（`member-register.html`）へ遷移する

- **WHEN** ユーザーが「パスワードをお忘れの方」リンクをクリックした際
  - **THEN** システムはパスワードリセット要求画面（`password-reset-request.html`）へ遷移する

### LP機能（紹介者トラッキング）
- **WHEN** ユーザーが `referrer_id` パラメータ付きのURLでアクセスした際
  - **THEN** システムは `referrer_id` をCookieに保存する（有効期限等は別途規定）

## 機能一覧

| 画面 | 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|---|
| ログイン | ログインフォーム | メールアドレスとパスワードによる認証を行う | 必須 | ユーザー | |
| ログイン | 新規登録リンク | 会員登録画面への遷移リンク | 必須 | ユーザー | |
| ログイン | パスワードリセットリンク | パスワードリセット画面への遷移リンク | 必須 | ユーザー | |
| LP | 紹介者ID保存 | URLパラメータの `referrer_id` をCookieに保存する | 必須 | システム | 新規登録時にこのIDが送信される想定 |

## ユーザ確認事項
- **Cookieの有効期限**: 紹介者IDを保存するCookieの有効期限（例: 30日間、セッション終了まで等）を確認する必要があります。
- **エラーメッセージの詳細**: ログイン失敗時の具体的なエラーメッセージ（「メールアドレスまたはパスワードが間違っています」等）や表示形式について確認が必要です。
- **ログイン後の遷移先**: 基本はダッシュボードですが、アクセスしようとしたページへのリダイレクトなどの要件があるか確認が必要です。
