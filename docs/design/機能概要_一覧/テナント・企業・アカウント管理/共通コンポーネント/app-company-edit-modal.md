# 会社情報編集モーダル (app-company-edit-modal.js)

## 概要
会社情報の登録・編集を行うためのモーダルコンポーネントです。国税庁の法人番号公表サイト等のデータソースに基づく「法人検索」機能と連携し、正確な企業情報の入力を支援します。

## 機能の目的
- ユーザーが正確な会社情報（正式名称、住所、法人番号）を簡単に登録できるようにする。
- 手入力によるミスを防ぎ、データの整合性を保つ。
- 会社に関する補足情報（メモ）を管理できるようにする。

## ユースケース
- **新規取引先の登録**: ユーザーは、新しい取引先企業を登録する際、法人検索機能を使用して基本情報を自動入力し、補足情報をメモ欄に記入して保存する。
- **既存会社情報の更新**: ユーザーは、登録済みの会社情報を確認し、必要に応じてメモ情報を更新する。

## EARS 記法による要件定義

### モーダル表示
- **WHEN** 呼び出し元画面（テナント企業一覧、取引先一覧など）から「編集」または「新規登録」アクションが実行された際
  - **THEN** システムは会社情報編集モーダルを表示する
  - **IF** 既存データの編集の場合
    - **THEN** システムは現在の会社情報をフォームにプレ入力する

### 法人検索連携
- **WHEN** ユーザーが「法人検索」ボタンをクリックした際
  - **THEN** システムは法人番号検索・選択モーダル（`app-official-company-search-modal`）を表示する

- **WHEN** 法人番号検索・選択モーダルで企業が選択された際
  - **THEN** システムは選択された企業の情報を本モーダルの各フィールド（法人番号、会社名、住所等）に自動入力する
  - **AND** 自動入力されたフィールドは編集不可（Read-only）とする

### 保存処理
- **WHEN** ユーザーが「保存」ボタンをクリックした際
  - **THEN** システムは入力された情報（自動入力項目＋メモ）を保存する
  - **AND** モーダルを閉じる

## 機能一覧

| 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|
| 法人検索連携 | 外部の法人検索モーダルを呼び出し、結果を受け取る | 必須 | ユーザー | `app-official-company-search-modal`を使用 |
| 自動入力 | 検索結果に基づいて会社基本情報をフォームに入力する | 必須 | システム | 誤入力防止のためRead-only |
| メモ入力 | 会社に関する自由記述のメモを入力する | 必須 | ユーザー | 唯一の編集可能フィールド |
| 保存 | 会社情報を保存する | 必須 | ユーザー | |

## ユーザ確認事項
- **編集不可フィールドの扱い**: 法人検索結果で自動入力された項目（会社名、住所など）は編集不可としていますが、手動での修正が必要なケース（登記住所と実住所が異なる場合など）がないか確認が必要です。現状はメモ欄での運用を想定しています。
