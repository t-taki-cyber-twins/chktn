# 法人番号検索・選択モーダル (app-official-company-search-modal.js)

## 概要
国税庁の法人番号公表サイトAPI（またはそれに準ずるデータソース）を利用して、正式な法人情報を検索・取得するための共通モーダルコンポーネントです。
企業登録時の入力補助として使用され、正確な法人名や住所情報の入力を支援します。

## 機能の目的
- ユーザーが法人番号や会社名から、正確な法人情報を簡単に検索・取得できるようにする。
- 手入力による誤記を防ぎ、データの正確性を向上させる。

## ユースケース
- **取引先企業の登録**: クライアント企業を新規登録する際、法人番号から基本情報を自動入力する。
- **テナント企業の登録**: 新規テナント企業を登録する際、正式名称や住所を取得する。

## EARS 記法による要件定義

### モーダル表示・タブ切り替え
- **WHEN** 呼び出し元画面から法人検索モーダルが開かれた際
  - **THEN** システムは検索画面を表示し、デフォルトで「法人番号から検索」タブをアクティブにする

- **WHEN** ユーザーが「会社名から検索」タブをクリックした際
  - **THEN** システムは会社名検索フォームを表示する

- **WHEN** ユーザーが「法人番号から検索」タブをクリックした際
  - **THEN** システムは法人番号検索フォームを表示する

### 検索実行
- **WHEN** ユーザーが法人番号（13桁）を入力して「検索」ボタンをクリックした際
  - **THEN** システムは入力された番号に一致する法人情報を検索して表示する

- **WHEN** ユーザーが都道府県（任意）と会社名を入力して「検索」ボタンをクリックした際
  - **THEN** システムは条件に一致する法人情報を検索して一覧表示する

### 選択・確定
- **WHEN** ユーザーが検索結果リストの項目をクリックした際
  - **THEN** システムは選択された法人情報を呼び出し元に返し、モーダルを閉じる

- **WHEN** ユーザーが「×」ボタンまたはオーバーレイをクリックした際
  - **THEN** システムは変更を破棄してモーダルを閉じる

## 機能一覧

| コンポーネント | 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|---|
| 法人検索モーダル | 検索タブ切り替え | 法人番号検索と会社名検索を切り替える | 必須 | ユーザー | |
| 法人検索モーダル | 法人番号検索 | 13桁の法人番号で完全一致検索を行う | 必須 | ユーザー | |
| 法人検索モーダル | 会社名検索 | 会社名（部分一致）と都道府県で検索を行う | 必須 | ユーザー | |
| 法人検索モーダル | 検索結果表示 | 検索結果（会社名、法人番号、住所）をリスト表示する | 必須 | システム | |
| 法人検索モーダル | 法人選択 | リストから法人を選択し、情報を呼び出し元へ渡す | 必須 | ユーザー | クリックで即時確定 |

## ユーザ確認事項
- **API連携**: 国税庁の法人番号システムWeb-APIを使用する想定ですが、APIキーの管理や利用制限（レートリミット）についての考慮が必要です。
- **検索結果の上限**: 会社名検索の場合、多数の候補がヒットする可能性があります。表示件数の上限やページネーションの必要性について確認が必要です。
- **エラーハンドリング**: API接続エラーや該当なしの場合の表示メッセージについて確認が必要です。
