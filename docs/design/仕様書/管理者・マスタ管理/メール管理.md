# メール管理画面 (mail-management.html)

## 概要
メールテンプレート、メーリングリスト、メール送信デフォルト設定を一元管理する画面です。
タブ形式で3つの管理機能を切り替え、それぞれの設定を行うことができます。

## 機能の目的
- システムから送信されるメールの品質と効率性を向上させる。
- メールテンプレートを一元管理し、一貫性のあるメールコミュニケーションを実現する。
- メーリングリストを管理し、特定のグループへの一括送信を容易にする。
- メール送信時のデフォルト設定（From、CC、BCCなど）を管理し、送信作業を効率化する。

## ユースケース
- **メールテンプレート管理**: ユーザーは、面談確定通知、エンジニア登録完了通知などのメールテンプレートを作成・編集・削除する。
- **メーリングリスト管理**: ユーザーは、営業部全体、技術部リーダーなどのメーリングリストを作成・編集・削除する。
- **デフォルト設定管理**: ユーザーは、メール送信時のデフォルト設定（From名、Fromメールアドレス、CC、BCCなど）を作成・編集・削除する。
- **検索とフィルタリング**: ユーザーは、各タブで名前やカテゴリで検索・フィルタリングを行う。

## EARS 記法による要件定義

### タブ切り替え機能
- **WHEN** ユーザーがタブボタン（「メールテンプレート」「メーリングリスト」「デフォルト設定」）をクリックした際
  - **THEN** システムは該当するタブコンテンツを表示する
  - **AND** サイドバーの検索フォームも該当タブの検索条件に切り替わる

### メールテンプレート管理
- **WHEN** ユーザーが「新規作成」ボタンをクリックした際
  - **THEN** システムはメールテンプレート作成フォームを表示する

- **WHEN** ユーザーがテンプレート名またはカテゴリで検索した際
  - **THEN** システムは条件に一致するテンプレートを一覧表示する

- **WHEN** ユーザーがテンプレートの「編集」ボタンをクリックした際
  - **THEN** システムはテンプレート編集フォームを表示する
  - **AND** 既存のテンプレート内容を読み込む

- **WHEN** ユーザーがテンプレートの「削除」ボタンをクリックした際
  - **THEN** システムは削除確認ダイアログを表示する
  - **AND** 確認後、該当テンプレートを削除する

### メーリングリスト管理
- **WHEN** ユーザーが「新規作成」ボタンをクリックした際
  - **THEN** システムはメーリングリスト作成フォームを表示する

- **WHEN** ユーザーがリスト名で検索した際
  - **THEN** システムは条件に一致するメーリングリストを一覧表示する

- **WHEN** ユーザーがメーリングリストの「編集」ボタンをクリックした際
  - **THEN** システムはメーリングリスト編集フォームを表示する
  - **AND** 既存のメーリングリスト内容（メンバー一覧など）を読み込む

- **WHEN** ユーザーがメーリングリストの「削除」ボタンをクリックした際
  - **THEN** システムは削除確認ダイアログを表示する
  - **AND** 確認後、該当メーリングリストを削除する

### デフォルト設定管理
- **WHEN** ユーザーが「新規作成」ボタンをクリックした際
  - **THEN** システムはデフォルト設定作成フォームを表示する

- **WHEN** ユーザーが設定名で検索した際
  - **THEN** システムは条件に一致するデフォルト設定を一覧表示する

- **WHEN** ユーザーがデフォルト設定の「編集」ボタンをクリックした際
  - **THEN** システムはデフォルト設定編集フォームを表示する
  - **AND** 既存の設定内容を読み込む

- **WHEN** ユーザーがデフォルト設定の「削除」ボタンをクリックした際
  - **THEN** システムは削除確認ダイアログを表示する
  - **AND** 確認後、該当デフォルト設定を削除する

### ページネーション
- **WHEN** 各タブの検索結果が1ページあたりの表示件数を超える際
  - **THEN** システムはページネーション コンポーネント（`app-pagination`）を表示する
  - **AND** ユーザーがページを切り替えられるようにする

## 機能一覧

| 画面 | 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|---|
| メール管理 | タブ切り替え | メールテンプレート、メーリングリスト、デフォルト設定のタブを切り替える | 必須 | システム管理者 | 3つのタブ |
| メール管理 | メールテンプレート検索 | テンプレート名、カテゴリで検索する | 必須 | システム管理者 | サイドバー検索フォーム |
| メール管理 | メールテンプレート作成 | 新規メールテンプレートを作成する | 必須 | システム管理者 | 件名、本文、カテゴリ等を設定 |
| メール管理 | メールテンプレート編集 | 既存メールテンプレートを編集する | 必須 | システム管理者 | 件名、本文、カテゴリ等を更新 |
| メール管理 | メールテンプレート削除 | メールテンプレートを削除する | 必須 | システム管理者 | 確認ダイアログ表示 |
| メール管理 | メーリングリスト検索 | リスト名で検索する | 必須 | システム管理者 | サイドバー検索フォーム |
| メール管理 | メーリングリスト作成 | 新規メーリングリストを作成する | 必須 | システム管理者 | リスト名、説明、メンバーを設定 |
| メール管理 | メーリングリスト編集 | 既存メーリングリストを編集する | 必須 | システム管理者 | メンバーの追加・削除等 |
| メール管理 | メーリングリスト削除 | メーリングリストを削除する | 必須 | システム管理者 | 確認ダイアログ表示 |
| メール管理 | デフォルト設定検索 | 設定名で検索する | 必須 | システム管理者 | サイドバー検索フォーム |
| メール管理 | デフォルト設定作成 | 新規デフォルト設定を作成する | 必須 | システム管理者 | From名、From アドレス、CC、BCC等を設定 |
| メール管理 | デフォルト設定編集 | 既存デフォルト設定を編集する | 必須 | システム管理者 | From名、Fromアドレス、CC、BCC等を更新 |
| メール管理 | デフォルト設定削除 | デフォルト設定を削除する | 必須 | システム管理者 | 確認ダイアログ表示 |
| メール管理 | ページネーション | 検索結果を複数ページに分割表示する | 必須 | システム | 各タブで`app-pagination`を使用 |

## 共通コンポーネント
この画面では以下の共通コンポーネントを使用しています。
- `app-header`: ヘッダーナビゲーション
- `app-sidebar`: サイドバー（タブごとの検索フォームを含む）
- `app-pagination`: ページネーション（各タブで使用）

## ユーザ確認事項
- **メールテンプレートのカテゴリ**: カテゴリの種類と追加の必要性について確認が必要です（現在：エンジニア関連、案件関連、面談関連、システム通知）。
- **メールテンプレートの変数**: テンプレート内で使用可能な変数（例：`{{engineer_name}}`、`{{project_name}}`など）の仕様を確認する必要があります。
- **メーリングリストの同期**: メーリングリストのメンバーを社員マスタと同期するか、独立して管理するかを確認する必要があります。
- **デフォルト設定の適用範囲**: デフォルト設定をユーザー単位、部署単位、またはテナント単位のいずれで管理するかを確認する必要があります。
- **アクセス権限**: この画面にアクセスできるユーザーの権限（システム管理者のみか、特定のロールも含むか）を確認する必要があります。
