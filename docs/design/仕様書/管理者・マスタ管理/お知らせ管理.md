# お知らせ管理画面 (announcement-management.html)

## 概要
システム全体またはテナント全体に向けたお知らせを作成・編集・公開管理する画面です。公開期間の設定やカテゴリ分類により、効果的な情報発信を実現します。

## 機能の目的
- システム管理者やテナント管理者が、ユーザーに向けて重要な情報を効率的に伝達する。
- お知らせの公開期間を管理し、適切なタイミングで情報を表示・非表示にする。
- カテゴリ分類により、ユーザーがお知らせの種類を一目で把握できるようにする。

## ユースケース
- **メンテナンスのお知らせ**: システム管理者は、予定されているメンテナンス作業について事前にお知らせを作成し、公開する。
- **新機能の告知**: システム管理者は、新しい機能のリリースをお知らせで告知し、ユーザーに周知する。
- **重要なお知らせの発信**: テナント管理者は、年末年始の営業日変更など、重要な情報をお知らせで発信する。
- **公開期間の管理**: 管理者は、お知らせの公開日、バナー掲載終了日、一覧表示終了日を設定し、適切な期間で情報を表示する。
- **過去のお知らせの確認**: 管理者は、公開終了したお知らせを検索・確認し、過去の情報を参照する。

## EARS 記法による要件定義

### お知らせ検索・一覧表示
- **WHEN** 管理者がお知らせ管理画面を開いた際
  - **THEN** システムはすべてのお知らせを一覧表示する
  - **AND** タイトル、カテゴリ、ステータス、公開日、バナー掲載終了日、一覧表示終了日を表示する

- **WHEN** 管理者が検索条件（タイトル、カテゴリ、ステータス）を入力して検索を実行した際
  - **THEN** システムは条件に一致するお知らせのみをフィルタリングして表示する
  - **IF** 「検索条件を記憶する」がチェックされている場合
    - **THEN** システムは検索条件を保存し、次回アクセス時に復元する

### お知らせステータスの自動更新
- **WHEN** システムが定期的にお知らせのステータスをチェックする際
  - **IF** 現在日時が公開日より前の場合
    - **THEN** システムはステータスを「公開前」として表示する
  - **ELSE IF** 現在日時が公開日以降かつ一覧表示終了日以前の場合
    - **THEN** システムはステータスを「公開中」として表示する
    - **AND IF** 現在日時がバナー掲載終了日以前の場合
      - **THEN** システムはお知らせをバナーとして表示する
    - **AND IF** 現在日時がバナー掲載終了日以降かつ一覧表示終了日以前の場合
      - **THEN** システムはお知らせを一覧のみに表示する（バナー非表示）
  - **ELSE** 現在日時が一覧表示終了日より後の場合
    - **THEN** システムはステータスを「公開終了」として表示する

### お知らせCRUD操作
- **WHEN** 管理者が「新規作成」ボタンをクリックした際
  - **THEN** システムはお知らせ作成フォームを表示する
  - **AND** タイトル、カテゴリ、本文、公開日、バナー掲載終了日、一覧表示終了日の入力を受け付ける

- **WHEN** 管理者が「編集」ボタンをクリックした際
  - **THEN** システムは該当するお知らせの編集フォームを表示する
  - **AND** 既存のお知らせ情報をフォームにロードする

- **WHEN** 管理者が「削除」ボタンをクリックした際
  - **THEN** システムは確認ダイアログを表示する
  - **IF** 管理者が削除を確認した場合
    - **THEN** システムはお知らせを削除する

### お知らせの表示（ユーザー側）
- **WHEN** ユーザーがシステムにログインした際
  - **IF** 公開中かつバナー掲載期間内のお知らせが存在する場合
    - **THEN** システムはダッシュボードにバナー形式でお知らせを表示する
  - **IF** 公開中かつ一覧表示期間内のお知らせが存在する場合
    - **THEN** システムはお知らせ一覧画面にお知らせを表示する

## 機能一覧

| 画面 | 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|---|
| お知らせ管理 | 検索 | タイトル、カテゴリ、ステータスで検索する | 必須 | 管理者 | |
| お知らせ管理 | 検索条件記憶 | 「検索条件を記憶します」がONの場合、検索条件を保存する | 推奨 | システム | localStorageで実装予定 |
| お知らせ管理 | 一覧表示 | すべてのお知らせをテーブル形式で表示する | 必須 | システム | |
| お知らせ管理 | ステータス表示 | お知らせの状態（公開前/公開中/公開終了）を表示する | 必須 | システム | バッジ形式で色分け表示 |
| お知らせ管理 | ステータス自動更新 | 公開日・終了日に基づきステータスを自動更新する | 必須 | システム | バッチ処理またはリアルタイム判定 |
| お知らせ管理 | 新規作成 | 新しいお知らせを作成する | 必須 | 管理者 | 作成フォームの実装方法要確認 |
| お知らせ管理 | 編集 | 既存お知らせの情報を編集する | 必須 | 管理者 | 編集フォームの実装方法要確認 |
| お知らせ管理 | 削除 | お知らせを削除する | 必須 | 管理者 | 確認ダイアログ |
| お知らせ管理 | ページネーション | ページ切り替えを行う | 必須 | 管理者 | `app-pagination`コンポーネントを使用 |

## ユーザ確認事項
- **公開範囲**: お知らせはシステム全体向けか、テナント単位で作成可能か、対象テナントを選択できるかの確認が必要です。
- **バナーと一覧の違い**: バナー掲載終了日と一覧表示終了日を分ける理由や、バナー表示の具体的な仕様（表示位置、デザイン等）の確認が必要です。
- **カテゴリの管理**: カテゴリ（メンテナンス、新機能、改善、重要なお知らせ）は固定値か、動的に追加・編集可能かの確認が必要です。
- **フォームの実装方法**: お知らせ作成・編集フォームをモーダル、別画面、インライン編集のいずれで実装するか確認が必要です。
- **リッチテキスト対応**: お知らせ本文でHTML形式やMarkdown形式をサポートするか、プレーンテキストのみかの確認が必要です。
- **通知機能**: お知らせ公開時にメール通知やシステム内通知を送信する機能の必要性について確認が必要です。
- **ページネーション仕様**: 1ページあたりの表示件数や、サーバーサイドページネーションの実装方法について確認が必要です。
