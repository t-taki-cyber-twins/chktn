# テナント情報編集モーダル (app-tenant-edit-modal.js)

## 概要
テナントの契約情報（プラン、支払方法、請求履歴）を確認・管理するためのモーダルコンポーネントです。プラン変更や支払方法の変更を行うための他のモーダルへの入り口としても機能します。

## 機能の目的
- テナントが自身の契約状況（現在のプラン、月額費用）を把握できるようにする。
- 支払方法の確認と変更を容易にする。
- 過去の請求履歴を確認し、請求書や領収書を取得できるようにする。

## ユースケース
- **契約内容の確認**: ユーザーは、現在のプランや次回の支払額を確認する。
- **プラン変更**: ユーザーは、プラン変更ボタンからプラン選択画面へ遷移し、契約プランをアップグレードまたはダウングレードする。
- **支払方法の更新**: ユーザーは、クレジットカードの有効期限切れなどに伴い、支払情報を更新する。
- **請求書・領収書の取得**: ユーザーは、経理処理のために過去の請求書や領収書をダウンロードする。

## EARS 記法による要件定義

### 情報表示
- **WHEN** モーダルが表示された際
  - **THEN** システムは現在のプラン情報（プラン名、価格）を表示する
  - **AND** 現在の支払方法（カード情報の一部など）を表示する
  - **AND** 直近の請求履歴（日付、金額）を表示する

### 変更アクション
- **WHEN** ユーザーが「プラン変更」ボタンをクリックした際
  - **THEN** システムはプラン選択モーダル（`app-plan-selection-modal`）を表示する

- **WHEN** ユーザーが「お支払い情報変更」ボタンをクリックした際
  - **THEN** システムは支払方法選択モーダル（`app-payment-method-modal`）を表示する

### 管理者モード
- **IF** 管理者モード（`setAdminMode(true)`）で呼び出された場合
  - **THEN** システムは「プラン変更」および「お支払い情報変更」ボタンを非表示にする
  - **REASON** システム管理者はテナントの契約内容を参照できるが、契約主体の代理として変更することは原則行わないため

## 機能一覧

| 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|
| プラン情報表示 | 現在の契約プランと料金を表示する | 必須 | ユーザー | |
| プラン変更連携 | プラン選択モーダルを呼び出す | 必須 | ユーザー | `app-plan-selection-modal`を使用 |
| 支払情報表示 | 現在の支払方法を表示する | 必須 | ユーザー | |
| 支払情報変更連携 | 支払方法選択モーダルを呼び出す | 必須 | ユーザー | `app-payment-method-modal`を使用 |
| 請求履歴表示 | 直近の請求履歴を表示する | 必須 | ユーザー | |
| 帳票ダウンロード | 請求書・領収書をダウンロードする | 必須 | ユーザー | 現状はボタンのみ（モック） |

## ユーザ確認事項
- **帳票ダウンロードの実装**: 請求書・領収書のPDF生成・ダウンロード機能のバックエンド連携仕様について確認が必要です。
- **履歴の表示期間**: 「直近3ヶ月」とありますが、より過去の履歴を参照する機能（「もっと見る」など）が必要か確認が必要です。
