# 支払方法選択モーダル (app-payment-method-modal.js)

## 概要
月額利用料の支払方法（クレジットカードまたは銀行振込）を選択・登録するためのモーダルコンポーネントです。

## 機能の目的
- ユーザーが都合の良い支払方法を選択できるようにする。
- クレジットカード情報の安全な入力フォームを提供する。
- 請求書払い（銀行振込）に必要な送付先情報を収集する。

## ユースケース
- **クレジットカード登録**: ユーザーは、サービスの利用を開始するためにクレジットカード情報を登録する。
- **カード情報更新**: ユーザーは、有効期限切れやカード紛失に伴い、新しいカード情報を登録する。
- **支払方法変更**: ユーザーは、クレジットカード払いから銀行振込（請求書払い）へ切り替える。

## EARS 記法による要件定義

### 支払方法選択
- **WHEN** モーダルが表示された際
  - **THEN** システムは利用可能な支払方法（クレジットカード、銀行振込）を表示する

- **WHEN** ユーザーが支払方法を選択した際
  - **THEN** システムは選択された方法に応じた詳細入力フォームを展開する
  - **IF** クレジットカードが選択された場合
    - **THEN** カード番号、有効期限、CVC、名義人の入力フィールドを表示する
  - **IF** 銀行振込が選択された場合
    - **THEN** 請求書送付先メールアドレス、部署・担当者名の入力フィールドを表示する

### 保存処理
- **WHEN** ユーザーが「変更を保存」ボタンをクリックした際
  - **THEN** システムは入力情報を検証し、保存する
  - **AND** 決済代行会社（Stripe等）と連携してカード有効性確認を行う（バックエンド処理）

## 機能一覧

| 機能名 | 概要 | 優先度 | アクター | 備考 |
|---|---|---|---|---|
| 支払方法切替 | クレジットカードと銀行振込を切り替える | 必須 | ユーザー | |
| クレジットカード入力 | カード情報を入力する | 必須 | ユーザー | |
| 請求書送付先入力 | 銀行振込時の請求書送付先を入力する | 必須 | ユーザー | |
| 保存 | 支払情報を保存する | 必須 | ユーザー | |

## ユーザ確認事項
- **銀行振込の審査**: 銀行振込（請求書払い）への切り替えに際して、与信審査等の承認フローが必要か確認が必要です（現状は即時保存）。
- **セキュリティ**: クレジットカード情報の非保持化対応（トークン決済など）の具体的な実装方式について確認が必要です。
